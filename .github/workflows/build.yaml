name: GitHub Actions Test
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  prepare-matrix-from-cake:
    runs-on: ubuntu-latest
    outputs:
      matrix: ${{ steps.set-matrix.outputs.matrix }}
    steps:
    - name: Run the Cake script
      id: set-matrix
      uses: cake-build/cake-action@v1
  # prepare-matrix:
  #   runs-on: ubuntu-latest
  #   outputs:
  #     matrix: ${{ steps.set-matrix.outputs.matrix }}
  #   steps:
  #   - name: Check out repository code
  #     uses: actions/checkout@v4
  #   - id: set-matrix
  #     run: python3 create-matrix.py
  cluster-action:
    needs: prepare-matrix-from-cake
    runs-on: ubuntu-latest
    strategy:
      matrix: ${{fromJson(needs.prepare-matrix-from-cake.outputs.matrix)}}
    steps:
    - run: echo ${{ matrix.cluster }}